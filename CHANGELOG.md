# 更新日志

所有重要的项目变更都会记录在这个文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.1.0] - 2025-01-05

### ✨ 重大新功能
- **🎨 Chrome Side Panel支持**
  - 全新的Chrome侧边栏界面，提供更好的用户体验
  - 支持持久化显示，方便随时使用
  - 现代化UI设计，参考flomo风格

- **📄 选中文本AI总结**
  - 支持选中页面任意文本进行AI总结
  - 自动识别全文总结和选中文本总结模式
  - 针对选中内容优化的AI提示词

- **🏷️ 标签管理系统增强**
  - 修复标签删除功能，支持一键删除
  - 改用现代JavaScript事件绑定方式
  - 支持包含特殊字符的标签处理

### 🐛 关键问题修复
- **修复选中文本清除功能**
  - 彻底清除chrome.storage.local中的缓存数据
  - 解决选中文本无法完全删除的问题
  - 改善清除后的状态反馈

- **修复AI总结功能统一性**
  - 统一全文总结和选中文本总结的处理逻辑
  - 解决"Extension context invalidated"错误
  - 改善扩展重新加载时的错误处理

- **移除调试功能**
  - 移除临时的"🧪 测试功能"按钮
  - 保留有用的连接测试功能
  - 优化生产环境的界面简洁性

### 🔧 技术改进
- **代码重构和优化**
  - 重构总结功能，使用统一的background action
  - 改善错误处理，添加扩展上下文失效检测
  - 使用现代JavaScript最佳实践

- **用户体验优化**
  - 添加更清晰的状态反馈和错误提示
  - 改善界面布局和交互体验
  - 支持两种使用模式：Side Panel和传统弹窗

### 📚 文档和备份
- 添加完整的功能测试指南
- 创建版本备份系统
- 更新README和使用说明

## [2.0.1] - 2025-01-01

### 🐛 问题修复
- **修复AI总结功能无法显示内容的问题**
  - 修复消息端口过早关闭导致的通信失败
  - 优化异步操作的消息传递机制
  - 确保background脚本和popup之间的正确通信

### ✨ 功能改进
- **增强错误处理和调试信息**
  - 添加详细的调试日志便于问题诊断
  - 提供更清晰的错误提示信息
  - 改进AI配置检查和用户反馈

- **添加降级处理选项**
  - AI失败时支持手动输入摘要
  - 提供友好的错误提示和解决建议
  - 确保用户在任何情况下都能正常使用

### 🔧 技术改进
- 重构消息监听器，正确处理异步操作
- 添加消息传递的错误处理机制
- 优化AI请求的超时和错误处理
- 增强代码的健壮性和可维护性

## [2.0.0] - 2024-12-31

### 🎨 重大更新 - 全新界面设计
- **全新UI设计**：采用现代化界面，参考flomo设计风格
- **智能布局**：重新设计popup界面，分区域展示功能
- **响应式设计**：优化不同屏幕尺寸的显示效果
- **流畅交互**：添加动画效果和用户反馈

### 🔗 智能链接识别
- **自动提取**：自动识别和显示页面标题、URL
- **实时显示**：在界面顶部清晰展示页面信息
- **格式优化**：智能格式化链接显示

### 📄 AI摘要功能增强
- **一键生成**：点击按钮即可生成AI摘要
- **可编辑内容**：支持手动编辑AI生成的摘要
- **智能优化**：根据页面类型优化AI提示词
- **加载状态**：添加生成过程的视觉反馈

### 💭 个人想法记录
- **独立区域**：专门的个人想法输入区域
- **自由编辑**：支持多行文本输入和编辑
- **思维记录**：与AI摘要分离，独立管理个人思考

### 🏷️ 可视化标签系统
- **智能生成**：基于页面内容自动生成相关标签
- **可视化编辑**：直观的标签添加、编辑和删除界面
- **手动管理**：支持手动添加自定义标签
- **分类优化**：改进智能分类规则，提高标签准确性

### 🚀 一键提交功能
- **内容整合**：自动整合摘要、想法和标签
- **格式化输出**：生成结构化的笔记内容
- **快速保存**：一键提交到Blinko系统
- **状态反馈**：完整的操作状态提示

### 🔧 技术改进
- **代码重构**：优化代码结构和性能
- **消息传递**：改进background和popup之间的通信
- **错误处理**：增强异常处理和用户反馈
- **测试支持**：添加功能测试页面

### 📱 用户体验优化
- **界面宽度**：调整popup宽度，提供更好的显示空间
- **交互优化**：改进按钮和输入框的交互体验
- **视觉反馈**：添加加载动画和状态指示器
- **操作流程**：简化用户操作流程

### 🎯 破坏性变更
- **界面重构**：完全重新设计的popup界面
- **功能整合**：将多个功能整合到统一界面
- **交互方式**：改变了用户的操作流程

## [1.2.0] - 2024-12-XX

### 新增
- ✨ 硅基流动(SiliconFlow) AI服务支持
- 🔧 自定义AI模型选择功能
- 📊 高级AI参数配置（温度、Top-P、超时等）
- 📝 自定义提示词模板系统
- 🎨 折叠式高级配置界面
- 🔍 智能API地址修正功能
- 🔐 智能Token格式处理

### 改进
- 🎨 重新设计配置页面UI，提升用户体验
- 🔧 增强API连接测试功能，支持多种格式尝试
- 📱 优化响应式设计，适配不同屏幕尺寸
- 🚀 提升AI总结质量和速度
- 📋 改进错误提示和用户反馈

### 修复
- 🐛 修复API地址单复数问题
- 🔧 修复Token格式兼容性问题
- 🎯 修复自定义模型选择逻辑
- 📝 修复配置保存和加载问题

### 技术改进
- 🏗️ 重构配置管理系统
- 🔒 增强错误处理和异常捕获
- 📊 添加详细的调试信息输出
- ⚡ 优化性能和内存使用

## [1.1.0] - 2024-12-XX

### 新增
- 🤖 AI文章总结功能
- 🧠 智能内容分类系统
- ⌨️ 快捷键支持
- 🏷️ 自动标签生成
- 📊 内容质量评分
- 🔍 关键词自动提取

### 改进
- 🎨 全新的用户界面设计
- 📱 响应式布局优化
- 🚀 提升收集速度和稳定性
- 📝 增强内容格式化

### 修复
- 🐛 修复页面收集失败问题
- 🔧 修复划词收集兼容性
- 📋 修复配置同步问题

## [1.0.0] - 2024-12-XX

### 新增
- 🎉 项目首次发布
- 📝 基础网页内容收集功能
- 🔗 Blinko API集成
- ✂️ 划词收集功能
- 📌 一键页面保存
- ⚙️ 基础配置管理
- 🎯 右键菜单集成

### 技术特性
- 🏗️ Chrome扩展架构
- 🔒 安全的本地存储
- 📡 异步API调用
- 🎨 现代化UI设计

---

## 版本说明

- **主版本号**：不兼容的API修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

## 图标说明

- ✨ 新增功能
- 🔧 功能改进
- 🐛 Bug修复
- 🎨 UI/UX改进
- 📝 文档更新
- 🚀 性能优化
- 🔒 安全性改进
- 🏗️ 架构变更
- 📊 数据/分析相关
- ⚡ 性能提升